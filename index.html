<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JumperSim</title>
    <link rel="stylesheet" href="./src/css/devconsole.css" />
    <link rel="stylesheet" href="./src/css/tooltip.css" />
    <link rel="stylesheet" href="./src/css/playback-controls.css" />
    <link rel="stylesheet" href="./src/css/loader.css" />
    <link rel="stylesheet" href="./src/css/menu.css" />
    <link rel="stylesheet" href="./src/css/minimized-windows.css" />
  </head>
  <body>
    <div id="menu">
      <div id="logocontainer"></div>
      <div id="menu-items">
        <span class="logo-text">Jumper Sim</span>

        <div class="menu-item dropdown">
          File
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="handleClick('New Scene')">
              <span>Save</span>
            </div>
            <div class="dropdown-item">
              <span>Load from File</span>
            </div>
            <div class="dropdown-item">
              <span>Auto-Save</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
          </div>
        </div>

        <div class="menu-item dropdown">
          Edit
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="handleClick('Undo')">
              <span>Undo</span>
            </div>
            <div class="dropdown-item" onclick="handleClick('Redo')">
              <span>Redo</span>
            </div>
          </div>
        </div>

        <div class="menu-item dropdown">
          Formations
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="handleClick('Undo')">
              <span>Save Formation</span>
            </div>
            <div class="dropdown-item submenu">
              <span>Import Formation</span>
              <div class="dropdown-menu right">
                <div class="dropdown-item" onclick="handleClick('From FBX')">
                  <span>From FBX</span>
                </div>
                <div class="dropdown-item" onclick="handleClick('From GLTF')">
                  <span>From GLTF</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="menu-item dropdown">
          Weather
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="handleClick('Undo')">
              <span>Undo</span>
            </div>
            <div class="dropdown-item" onclick="handleClick('Redo')">
              <span>Redo</span>
            </div>
          </div>
        </div>
        <div class="menu-item dropdown">
          View
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="handleClick('Undo')">
              <span>Undo</span>
            </div>
            <div class="dropdown-item" onclick="handleClick('Redo')">
              <span>Redo</span>
            </div>
          </div>
        </div>

        <div class="menu-item dropdown">
          Window
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="reCenterAllWindows('Undo')">
              <span>Re-center Windows</span>
            </div>
            <div class="dropdown-item">
              <span>Weather</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
            <div class="dropdown-item">
              <span>Location</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
            <div class="dropdown-item">
              <span>Playback Controls</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
            <div class="dropdown-item">
              <span>Scene Objects</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
            <div class="dropdown-item">
              <span>Jump Settings</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
            <div class="dropdown-item">
              <span>Speed Settings</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
            <div class="dropdown-item">
              <span>Credits</span>
              <input
                type="checkbox"
                onclick="handleToggle(this, 'Auto-Save')"
              />
            </div>
          </div>
        </div>
        <div class="menu-item dropdown">
          Help
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="handleClick('Undo')">
              <span>Information</span>
            </div>
          </div>
        </div>
        <div class="menu-item dropdown">
          Credits
          <div class="dropdown-menu" style="gap: 10px">
            <span>Sevan Evans B-63914</span>
            <span>Cole Patterson</span>
          </div>
        </div>
        <div></div>
      </div>
    </div>

    <!-- for holding the minimized tabs in the bottom -->
    <div id="minimized-bar"></div>

    <!-- compass -->
    <div id="compassContainer" style="position: absolute; margin: 3rem">
      <img src="./src/svg/compass.svg" alt="Compass" id="compass" />
      <text
        transform="matrix(1 0 0 1 77 37)"
        fill="#575756"
        font-family="Arial"
        font-size="12"
        >N</text
      >
    </div>

    <div class="panel" id="location-panel">
      <div class="panel-header">
        <h2>Location</h2>
        <div class="panel-controls">
          <button>–</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body">
        <label for="dropzone-select">Choose a dropzone:</label>

        <select id="dropzone-select">
          <option value="">-- Select a dropzone --</option>
        </select>
        <div id="dropzone-details" style="margin-top: 1em"></div>
        <div class="panel-controls">
          <div id="fetch-container">
            <button id="fetchWeather">Fetch Weather</button>
            <label>Model: Open-Mateo.com</label>
            <div
              id="fetchWeather-loader"
              class="dot-carousel"
              style="display: none"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel" id="sim-panel">
      <div class="panel-header">
        <h2>Jump Settings</h2>
        <div class="panel-controls">
          <button>–</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body">
        <label>
          Separation (s):
          <input
            type="number"
            id="separation"
            min="0"
            max="10"
            step="0.1"
            value="2"
          />
        </label>
        <label>
          Pull Altitude (ft):
          <input
            type="number"
            id="pullAltitude"
            min="500"
            max="6000"
            step="100"
            value="3500"
          />
        </label>
      </div>
    </div>

    <div class="panel" id="weatherdata-panel">
      <div class="panel-header">
        <h2>Weather</h2>
        <div class="panel-controls">
          <button>–</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body"></div>
    </div>

    <div class="panel" id="credits-panel">
      <div class="panel-header">
        <h2>Credits</h2>
        <div class="panel-controls">
          <button>–</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body">
        <label>Sevan Evans B-63914</label>
        <label>Cole Patterson</label>
      </div>
    </div>

    <div class="panel" id="objects-panel">
      <div class="panel-header">
        <h2>Scene Objects</h2>
        <div class="panel-controls">
          <button>–</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body">
        <label
          >TODO: add current active jumpers and planes where you can view stats
          and look at objects</label
        >
      </div>
    </div>

    <div class="panel" id="speed-panel">
      <div class="panel-header">
        <h2>Speed Settings</h2>
        <div class="panel-controls">
          <button>-</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body">
        <label>
          Plane Speed (knots):
          <input
            type="number"
            id="planeSpeed"
            min="50"
            max="150"
            step="1"
            value="90"
          />
        </label>
        <label>
          Belly Jumper Speed (ft/s):
          <input
            type="number"
            id="bellySpeed"
            min="90"
            max="150"
            step="1"
            value="130"
          />
        </label>
        <label>
          Freefly Jumper Speed (ft/s):
          <input
            type="number"
            id="freeflySpeed"
            min="100"
            max="200"
            step="1"
            value="160"
          />
        </label>
      </div>
    </div>

    <div class="panel" id="info-tooltip"></div>

    <div class="panel" id="playback-panel">
      <div class="panel-header">
        <h2>Playback Controls</h2>
        <div class="panel-controls">
          <button>–</button>
          <button>×</button>
        </div>
      </div>
      <div class="panel-body">
        <div class="panel-controls">
          <button id="start">⏮</button>
          <button id="rewind">⏴</button>
          <button id="playPause">▶</button>
          <button id="forward">⏵</button>
          <button id="end">⏭</button>
        </div>

        <input
          type="range"
          id="scrubber"
          min="0"
          max="250"
          value="0"
          step="0.1"
          style="flex: 1"
        />
        <span
          id="timeLabel"
          style="min-width: 60px; text-align: right; color: #fff"
          >0.0s</span
        >
      </div>
    </div>
    <script src="./src/js/globalVars.ts" type="module" defer></script>
    <script src="./src/js/devConsole.ts" type="module"></script>
    <script src="./src/js/timeScrubber.ts" type="module"></script>
    <script src="./src/js/scripts.ts" type="module" defer></script>
    <script src="./src/apidata/openMateo.ts" type="module"></script>
    <script src="./src/js/panelDrag.ts" type="module"></script>
    <script src="./src/js/locationSelect.ts" type="module"></script>
    <script type="module">
      import { reCenterAllWindows } from "./src/js/panelDrag.js";

      window.reCenterAllWindows = reCenterAllWindows;
    </script>
  </body>
</html>
